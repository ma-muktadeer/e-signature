----create table---------
CREATE TABLE T_MAIL_TEMP_AUDIT
(
  ID_MAIL_TEMP_KEY        NUMBER(19)            NOT NULL,
  IS_ACTIVE               NUMBER(10),
  ID_APPROVED_BY_ID       NUMBER(19),
  DTT_APPROVE             TIMESTAMP(6),
  ID_CLIENT_KEY           NUMBER(19),
  DTT_CREATE              TIMESTAMP(6),
  ID_USER_CREATE_KEY      NUMBER(19),
  ID_EVENT_KEY            NUMBER(10),
  DTT_MOD                 TIMESTAMP(6)          NOT NULL,
  ID_STATE_KEY            NUMBER(10),
  ID_USER_MOD_KEY         NUMBER(19),
  ID_AUTHORIZE_BY         NUMBER(19),
  TX_AUTHORIZE_TIME       TIMESTAMP(6),
  TX_GROUP                VARCHAR2(96 CHAR),
  TX_REQ_SUBJECT          VARCHAR2(128 CHAR),
  TX_STATUS               VARCHAR2(56 CHAR),
  TX_SUBJECT              VARCHAR2(128 CHAR),
  TX_TYPE                 VARCHAR2(256 CHAR),
  TX_UPDATE_STATUS        VARCHAR2(56 CHAR),
  TX_IP_ADDR              VARCHAR2(255 CHAR),
  TX_GATEWAY_IP           VARCHAR2(255 CHAR),
  TX_BODY                 CLOB,
  TX_REQ_BODY             CLOB,
  ID_MAIL_TEMP_AUDIT_KEY  NUMBER                NOT NULL
)

------seq----

CREATE SEQUENCE MAIL_TEMP_AUDIT_SEQ
  START WITH 1
  MAXVALUE 9999999999999999999999999999
  MINVALUE 1
  NOCYCLE
  CACHE 20
  NOORDER
  NOKEEP
  GLOBAL;
  
  ----index
 CREATE INDEX IDEX_MAIL_TMP_ADT ON T_MAIL_TEMP_AUDIT(ID_MAIL_TEMP_AUDIT_KEY);
 
 -----tiger---
 
 CREATE OR REPLACE TRIGGER TRG_MAIL_TEMPLET
AFTER INSERT OR UPDATE OR DELETE ON T_MAIL_TEMP
FOR EACH ROW
BEGIN
    INSERT INTO T_MAIL_TEMP_AUDIT (ID_MAIL_TEMP_AUDIT_KEY,ID_MAIL_TEMP_KEY, IS_ACTIVE, ID_APPROVED_BY_ID,DTT_APPROVE,ID_CLIENT_KEY,DTT_CREATE,
    ID_USER_CREATE_KEY,ID_EVENT_KEY,DTT_MOD,ID_STATE_KEY,ID_USER_MOD_KEY,ID_AUTHORIZE_BY,TX_AUTHORIZE_TIME,TX_GROUP,TX_REQ_SUBJECT,TX_STATUS,
    TX_SUBJECT,TX_TYPE,TX_UPDATE_STATUS,TX_IP_ADDR,TX_GATEWAY_IP,TX_BODY,TX_REQ_BODY)
    VALUES (MAIL_TEMP_AUDIT_SEQ.NEXTVAL,:NEW.ID_MAIL_TEMP_KEY,:NEW.IS_ACTIVE, :NEW.ID_APPROVED_BY_ID, :NEW.DTT_APPROVE, :NEW.ID_CLIENT_KEY,
    :NEW.DTT_CREATE,:NEW.ID_USER_CREATE_KEY,:NEW.ID_EVENT_KEY,:NEW.DTT_MOD,:NEW.ID_STATE_KEY,:NEW.ID_USER_MOD_KEY,:NEW.ID_AUTHORIZE_BY,:NEW.TX_AUTHORIZE_TIME,
    :NEW.TX_GROUP,:NEW.TX_REQ_SUBJECT,:NEW.TX_STATUS,:NEW.TX_SUBJECT,:NEW.TX_TYPE,:NEW.TX_UPDATE_STATUS,
    :NEW.TX_IP_ADDR,:NEW.TX_GATEWAY_IP,:NEW.TX_BODY,:NEW.TX_REQ_BODY);
    
    
END;
/