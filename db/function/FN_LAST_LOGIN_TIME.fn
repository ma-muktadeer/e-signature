CREATE OR REPLACE FUNCTION FN_LAST_LOGIN_TIME(
        P_ID_USER_KEY IN NUMBER
        )
      RETURN VARCHAR2
    IS
      V_LAST_LOGIN_TIME   VARCHAR2 (90);

    BEGIN
      SELECT TO_CHAR(MAX(L.DTT_LOGIN_TIME),'YYYY-MM-DD HH:MM AM') INTO V_LAST_LOGIN_TIME  
      FROM T_LOGIN L WHERE L.ID_USER_KEY=P_ID_USER_KEY AND L.INT_LOGIN=1;

   RETURN V_LAST_LOGIN_TIME;
   END;
   